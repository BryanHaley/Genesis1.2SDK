<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<title>WildTest 3: Model Texturing Test</title>
</head>
<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" src="tests_js.js"></script>
<body>
<div align="Center">
	<font size="5" face="Arial" color="Black"><b>Model Texturing Test</b></font>
	<table>
	<tr>
		<td valign="top">
		<object classid='clsid:FA13A9FA-CA9B-11D2-9780-00104B242EA3' ID='wtScene' width='300' height='300'><embed  type='application/x-wildtangent-web-driver' name='wtScene' width='300' height='300'></embed></object>

		<form name="button"><input name="startTest" type="button" value="Loading..." onClick="beginTest();"> <input type="button" NAME="closer" value="Stop Test" onclick="javascript:self.close();"></form>
		</td>
		<TD VALIGN="top">
			<b><font face="Arial" size="5" color="Gray">What You Should See:</font></b><br>
			<table>
			<tr>
				<td><font face="Verdana" size="2"><b>
				
				This test maps a texture onto five spinning spheres.
				<UL>
					<LI>Step 1:<BR>
					<IMG SRC="images/3-1.jpg" WIDTH=150 HEIGHT=150 ALT="Step 1" BORDER="0">
					<LI>Step 2:<BR>
					<IMG SRC="images/3-2.jpg" WIDTH=150 HEIGHT=150 ALT="Step 2" BORDER="0">
					<LI>Step 3:<BR>
					<IMG SRC="images/3-3.jpg" WIDTH=150 HEIGHT=150 ALT="Step 3" BORDER="0">
					<LI>Step 4:<BR>
					<IMG SRC="images/3-4.jpg" WIDTH=150 HEIGHT=150 ALT="Step 4" BORDER="0">
					<LI>Step 5:<BR>
					<IMG SRC="images/3-5.jpg" WIDTH=150 HEIGHT=150 ALT="Step 5" BORDER="0">
					<LI>Step 6:<BR>
					<IMG SRC="images/3-6.jpg" WIDTH=150 HEIGHT=150 ALT="Step 6" BORDER="0">
					<LI>Step 7:<BR>
					<IMG SRC="images/3-7.jpg" WIDTH=150 HEIGHT=150 ALT="Step 7" BORDER="0">
					<LI>Step 8:<BR>
					<IMG SRC="images/3-8.jpg" WIDTH=150 HEIGHT=150 ALT="Step 8" BORDER="0">
				</UL>

				</b></font></td>
			</tr>
			</table>
		</TD>
	</tr>
	</table>
</div>

<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">
<!--
/* Apply the current texture from the array */
var current_array 		 = sphereTex;
var current_array_string = "sphereTex"; 
var current_num   		 = 0;
var current_texture_num  = 1;
var isLoading = false;
var isDone = false;
var testDone = false;
var test_drop		= null;
var test_bitmap		= null;
var sphereModel, sphere1, sphere2, sphere3, sphere4, sphere5;

function initHTML() 
{
	sphereModel = scene.createModel(models[0]);
	sphereModel.setScale(.1, .1, .1);
	sphere1 = scene.createContainer();
	sphere2 = scene.createContainer();
	sphere3 = scene.createContainer();
	sphere4 = scene.createContainer();
	sphere5 = scene.createContainer();
	sphere1.attach(sphereModel);
	sphere2.attach(sphereModel);
	sphere3.attach(sphereModel);
	sphere4.attach(sphereModel);
	sphere5.attach(sphereModel);
	mainStage.addObject(sphere1);
	sphere1.setPosition(-.6, .6, 0);
	mainStage.addObject(sphere2);
	sphere2.setPosition(0, 0, 0);
	mainStage.addObject(sphere3);
	sphere3.setPosition(.6, -.6, 0);
	mainStage.addObject(sphere4);
	sphere4.setPosition(-.6, -.6, 0);
	mainStage.addObject(sphere5);
	sphere5.setPosition(.6,.6, 0);
	sphere1.setConstantRotation(1,0,0,30);
	sphere2.setConstantRotation(0,1,0,30);
	sphere3.setConstantRotation(0,0,1,30);
	sphere4.setConstantRotation(0,1,1,30);
	sphere5.setConstantRotation(1,1,0,30);
	status_info.setTextColor(0, 255, 0);
}

function rFunction(thisRender)
{
	var thisTime = new Date();
	if(isDone)
	{
		return;
	}
	
	if (thisTime.getTime() - lastRenderTime >= 2500)
	{
		if(!isLoading) {
			isLoading = true;

			if (current_num >= current_array.length)
				testDone = true;
				
			if(!testDone)
			{
				test_bitmap = scene.createBitmap( current_array[current_num]);
				status_info.setColor( 255, 0, 0 );
				status_info.drawText( 0, scene_height - 32, "Step: " + current_texture_num + " loading...");
			} else {
				status_info.setColor(255,0,0);
				status_info.drawText(0,0, "DONE!" );
				document.button.closer.value = "Finished!";
				isDone = true;
				return;
			}
		}
		
		if(test_bitmap.getIsLoaded()) {
			lastRenderTime = thisTime.getTime();
			isLoading = false;
			sphereModel.setTexture(test_bitmap);
			status_info.setColor( 255, 0, 0 );
			status_info.drawText( 0, scene_height - 32, "Step: " + current_texture_num );
			status_info.drawText( 0, scene_height - 16, current_array[current_num].substring(current_array[ current_num ].lastIndexOf("/") + 1, current_array[ current_num ].length ) );
			current_num++;
			current_texture_num++;
		}
	}
}
//-->
</SCRIPT>

<SCRIPT LANGUAGE=javascript FOR=wtScene EVENT="WTRenderEvent(renderEvent)">
<!--
	if(is_ie4up || is_aol4)
	  rFunction(renderEvent);
//-->
</SCRIPT>

</body>
</html>
