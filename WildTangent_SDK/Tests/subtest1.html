<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<title>WildTest 1: BackDrop Bitmap Test</title>
</head>
<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript" src="tests_js.js"></script>
<body>
<div align="Center">
	<font size="5" face="Arial" color="Black"><b>BackDrop Bitmap Test</b></font>
	<table>
	<tr>
		<TD VALIGN="top">
		<object classid='clsid:FA13A9FA-CA9B-11D2-9780-00104B242EA3' ID='wtScene' width='300' height='300'><embed  type='application/x-wildtangent-web-driver' name='wtScene' width='300' height='300'></embed></object>

		<form name="button"><input name="startTest" type="button" value="Loading..." onClick="beginTest();"> <input type="button" NAME="closer" value="Stop Test" onclick="javascript:self.close();"></form>
		</TD>
		<TD VALIGN="top">
			<b><font face="Arial" size="5" color="Gray">What You Should See:</font></b><br>
			<table>
			<tr>
				<td><font face="Verdana" size="2"><b>
				This test places a texture at different resolutions and formats on the screen.  Background colors are also tested.  What you should see for each step is shown below.
				<UL>
					<LI>Step 1:<BR>
					<IMG SRC="images/1-1.jpg" WIDTH=150 HEIGHT=150 ALT="Step 1" BORDER="0">
					<LI>Step 2:<BR>
					<IMG SRC="images/1-2.jpg" WIDTH=150 HEIGHT=150 ALT="Step 2" BORDER="0">
					<LI>Step 3:<BR>
					<IMG SRC="images/1-3.jpg" WIDTH=150 HEIGHT=150 ALT="Step 3" BORDER="0">
					<LI>Step 4:<BR>
					<IMG SRC="images/1-4.jpg" WIDTH=150 HEIGHT=150 ALT="Step 4" BORDER="0">
					<LI>Step 5:<BR>
					<IMG SRC="images/1-5.jpg" WIDTH=150 HEIGHT=150 ALT="Step 5" BORDER="0">
					<LI>Step 6:<BR>
					<IMG SRC="images/1-6.jpg" WIDTH=150 HEIGHT=150 ALT="Step 6" BORDER="0">
					<LI>Step 7:<BR>
					<IMG SRC="images/1-7.jpg" WIDTH=150 HEIGHT=150 ALT="Step 7" BORDER="0">
					<LI>Step 8:<BR>
					<IMG SRC="images/1-8.jpg" WIDTH=150 HEIGHT=150 ALT="Step 8" BORDER="0">
					<LI>Step 9:<BR>
					<IMG SRC="images/1-9.jpg" WIDTH=150 HEIGHT=150 ALT="Step 9" BORDER="0">
					<LI>Step 10:<BR>
					<IMG SRC="images/1-10.jpg" WIDTH=150 HEIGHT=150 ALT="Step 10" BORDER="0">
				</UL>
				
				
				</b></font></td>
			</tr>
			</table>
		</TD>
	</tr>
	</table>
</div>
<p>

<SCRIPT LANGUAGE="JavaScript" TYPE="text/javascript">
<!-- 
/* Apply the current texture from the array */
var current_array 		 = jpg;
var current_array_string = "jpg"; 
var current_num   		 = 0;
var current_texture_num  = 1;
var isLoading = false;
var isDone = false;
var testDone = false;
var test_drop		= null;
var test_bitmap		= null;

function initHTML() 
{
	back_image = scene.createBlankBitmap(scene_width, scene_height)
	back_drop  = viewpoint.addDrop( back_image, false );
	back_image.setColor(0,0,255);
	status_info.setTextColor(0, 0, 0);
}

function rFunction(thisRender)
{
	var thisTime = new Date();
	
	if(isDone)
	{
		return;
	}
	
	if (thisTime.getTime() - lastRenderTime >= 1500)
	{
		if(!isLoading) {
			isLoading = true;
			if (current_num >= current_array.length)
			{
				current_num = 0;
				switch ( current_array_string ) {
					case "jpg":
						back_image.setColor(0,255,0);
						current_array_string = "png";
						current_array = png;
						break;
					case "png":
						testDone = true;
						break;
				}
			}

			if(!testDone)
			{
				test_bitmap = scene.createBitmap( current_array[ current_num ], 0);
				status_info.setColor( 255, 0, 0 );
				status_info.drawText( 0, scene_height - 32, "Step: " + current_texture_num + " loading...");
			} else {
				status_info.setColor(255,0,0);
				status_info.drawText(0,0, "DONE!" );
				document.button.closer.value = "Finished!";
				test_bitmap = scene.createBitmap( jpg_dir + "Finished.wjp");
				if ( test_drop != null )
					viewpoint.removeDrop( test_drop );
				test_drop = viewpoint.addDrop( test_bitmap, false );
				test_drop.setSize(300, 300);
				isDone = true;
				return;
			}
		}
		
		if(test_bitmap.getIsLoaded()) {
			lastRenderTime = thisTime.getTime();
			isLoading = false;
			if ( test_drop != null )
				viewpoint.removeDrop( test_drop );
			test_drop = viewpoint.addDrop( test_bitmap, false );
			status = test_drop.getBitmapWidth();
			status_info.setColor( 255, 0, 0 );
			status_info.drawText( 0, scene_height - 32, "Step: " + current_texture_num );
			status_info.drawText( 0, scene_height - 16, current_array[current_num].substring(current_array[ current_num ].lastIndexOf("/") + 1, current_array[ current_num ].length ) );
			current_num++;
			current_texture_num++;
		}
	}
}
//-->
</SCRIPT>

<SCRIPT LANGUAGE=javascript FOR=wtScene EVENT="WTRenderEvent(renderEvent)">
<!--
	if(is_ie4up || is_aol4)
	  rFunction(renderEvent);
//-->
</SCRIPT>

</body>
</html>
